<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ØªØµØ­ÙŠØ­ Ø§Ù„Ø£Ø®Ø·Ø§Ø¡</title>
    <style>
        body { font-family: Arial; padding: 20px; background: #f5f5f5; }
        .btn { padding: 10px; margin: 5px; border: none; border-radius: 5px; }
        .success { background: green; color: white; }
        .error { background: red; color: white; }
        .warning { background: orange; color: white; }
        #output { background: white; padding: 15px; margin: 10px 0; border-radius: 5px; }
    </style>
</head>
<body>
    <h1>ğŸ› ØªØµØ­ÙŠØ­ Ø§Ù„Ù…ØªØ¬Ø±</h1>
    
    <button class="btn success" onclick="testFirebase()">Ø§Ø®ØªØ¨Ø§Ø± Firebase</button>
    <button class="btn warning" onclick="testDatabase()">Ø§Ø®ØªØ¨Ø§Ø± Ù‚Ø§Ø¹Ø¯Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª</button>
    <button class="btn" onclick="testAddProduct()">Ø§Ø®ØªØ¨Ø§Ø± Ø¥Ø¶Ø§ÙØ© Ù…Ù†ØªØ¬</button>
    <button class="btn error" onclick="clearOutput()">Ù…Ø³Ø­ Ø§Ù„Ù†ØªØ§Ø¦Ø¬</button>
    
    <div id="output"></div>
    <div id="results"></div>

    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-firestore-compat.js"></script>
    <script>
        // ØªÙƒÙˆÙŠÙ† Firebase
        const firebaseConfig = {
            apiKey: "AIzaSyBnCeIjj1PHBrDRS-zjw8qLEGc-w4SS1XE",
            authDomain: "tawsel735.firebaseapp.com",
            projectId: "tawsel735",
            storageBucket: "tawsel735.firebasestorage.app",
            messagingSenderId: "723079637443",
            appId: "1:723079637443:web:170f06eec77d25e4647576",
            measurementId: "G-R84FEYXMDJ"
        };

        // ØªÙ‡ÙŠØ¦Ø© Firebase
        firebase.initializeApp(firebaseConfig);
        const db = firebase.firestore();

        function addOutput(message, type = 'info') {
            const output = document.getElementById('output');
            const div = document.createElement('div');
            div.style.padding = '5px';
            div.style.margin = '2px';
            div.style.borderRight = type === 'error' ? '5px solid red' : 
                                  type === 'success' ? '5px solid green' : '5px solid blue';
            div.innerHTML = `ğŸ“± ${message}`;
            output.appendChild(div);
        }

        function clearOutput() {
            document.getElementById('output').innerHTML = '';
            document.getElementById('results').innerHTML = '';
        }

        async function testFirebase() {
            addOutput('ğŸ”¥ Ø§Ø®ØªØ¨Ø§Ø± Firebase...');
            
            if (typeof firebase === 'undefined') {
                addOutput('âŒ Firebase ØºÙŠØ± Ù…Ø­Ù…Ù„', 'error');
                return false;
            }
            
            if (typeof firebase.firestore === 'undefined') {
                addOutput('âŒ Firestore ØºÙŠØ± Ù…Ø­Ù…Ù„', 'error');
                return false;
            }
            
            addOutput('âœ… Firebase Ùˆ Firestore Ø¬Ø§Ù‡Ø²Ø§Ù†', 'success');
            return true;
        }

        async function testDatabase() {
            addOutput('ğŸ—ƒï¸ Ø§Ø®ØªØ¨Ø§Ø± Ù‚Ø§Ø¹Ø¯Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª...');
            
            try {
                const testRef = db.collection('test');
                await testRef.add({ 
                    test: true, 
                    timestamp: new Date(),
                    message: 'Ø§Ø®ØªØ¨Ø§Ø± Ù…Ù† Ø§Ù„Ù‡Ø§ØªÙ'
                });
                addOutput('âœ… Ø§Ù„Ø§ØªØµØ§Ù„ Ø¨Ù‚Ø§Ø¹Ø¯Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ù†Ø§Ø¬Ø­', 'success');
                return true;
            } catch (error) {
                addOutput(`âŒ ÙØ´Ù„ Ø§Ù„Ø§ØªØµØ§Ù„: ${error.message}`, 'error');
                return false;
            }
        }

        async function testAddProduct() {
            addOutput('ğŸ§ª Ø§Ø®ØªØ¨Ø§Ø± Ø¥Ø¶Ø§ÙØ© Ù…Ù†ØªØ¬...');
            
            const testProduct = {
                name: "Ù…Ù†ØªØ¬ Ø§Ø®ØªØ¨Ø§Ø± Ù…Ù† Ø§Ù„Ù‡Ø§ØªÙ",
                price: 999,
                description: "Ù‡Ø°Ø§ Ø§Ø®ØªØ¨Ø§Ø± Ù…Ù† Ø§Ù„Ù‡Ø§ØªÙ",
                category: "Ø§Ø®ØªØ¨Ø§Ø±",
                image: "https://via.placeholder.com/300x200",
                dateAdded: new Date().toLocaleDateString('ar-EG')
            };
            
            try {
                const docRef = await db.collection('products').add(testProduct);
                addOutput(`âœ… ØªÙ… Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ù…Ù†ØªØ¬: ${docRef.id}`, 'success');
                
                // Ø¹Ø±Ø¶ Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª Ø§Ù„Ù…Ø¶Ø§ÙØ©
                const snapshot = await db.collection('products').get();
                const products = [];
                snapshot.forEach(doc => {
                    products.push({ id: doc.id, ...doc.data() });
                });
                
                const results = document.getElementById('results');
                results.innerHTML = `<h3>Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª ÙÙŠ Ù‚Ø§Ø¹Ø¯Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª: ${products.length}</h3>`;
                products.forEach(product => {
                    results.innerHTML += `<p>ğŸ“¦ ${product.name} - $${product.price}</p>`;
                });
                
                return true;
            } catch (error) {
                addOutput(`âŒ ÙØ´Ù„ Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ù…Ù†ØªØ¬: ${error.message}`, 'error');
                return false;
            }
        }

        // Ø§Ø®ØªØ¨Ø§Ø± ØªÙ„Ù‚Ø§Ø¦ÙŠ Ø¹Ù†Ø¯ Ø§Ù„ØªØ­Ù…ÙŠÙ„
        setTimeout(() => {
            addOutput('ğŸ”§ Ø¬Ø§Ù‡Ø² Ù„Ù„Ø§Ø®ØªØ¨Ø§Ø±... Ø§Ø¶ØºØ· Ø¹Ù„Ù‰ Ø§Ù„Ø£Ø²Ø±Ø§Ø± above');
        }, 1000);
    </script>
</body>
</html>
